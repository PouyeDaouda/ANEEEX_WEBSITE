document.addEventListener("DOMContentLoaded",(()=>{const readMoreLinks=document.querySelectorAll("a.read-more[data-article-id]");const fullArticleOverlay=document.getElementById("full-article-overlay");const fullArticleContainer=document.getElementById("full-article-container");if(!fullArticleOverlay||!fullArticleContainer){console.error("Les éléments DOM pour l'affichage de l'article complet sont introuvables.");return}const closeBtn=fullArticleContainer.querySelector(".close-btn");const titleEl=document.getElementById("full-article-title");const dateEl=document.getElementById("full-article-date");const mediaContainerEl=document.getElementById("full-article-media-container");const descriptionEl=document.getElementById("full-article-description");if(!closeBtn||!titleEl||!dateEl||!mediaContainerEl||!descriptionEl){console.error("Un ou plusieurs éléments enfants du conteneur d'article sont introuvables.");return}readMoreLinks.forEach((link=>{link.addEventListener("click",(async event=>{event.preventDefault();const articleId=link.dataset.articleId;if(!articleId)return;titleEl.textContent="Chargement...";dateEl.textContent="";mediaContainerEl.innerHTML="";descriptionEl.innerHTML="";fullArticleOverlay.style.display="block";document.body.style.overflow="hidden";try{const response=await fetch(`/blog/article/${articleId}`);if(!response.ok){const errorData=await response.json().catch((()=>({message:`Erreur HTTP ${response.status}`})));throw new Error(errorData.message||`Erreur ${response.status}`)}const article=await response.json();titleEl.textContent=article.title;dateEl.textContent=article.formattedDate?`Publié le ${article.formattedDate}`:"";mediaContainerEl.innerHTML="";if(article.mediaType==="image"&&article.mediaUrl){const img=document.createElement("img");img.src=article.mediaUrl;img.alt=article.title;mediaContainerEl.appendChild(img)}descriptionEl.textContent=article.description}catch(error){console.error("Erreur lors du chargement de l'article:",error);titleEl.textContent="Erreur de chargement";descriptionEl.innerHTML=`Impossible de charger l'article. ${error.message}`}}))}));function closeArticleOverlay(){fullArticleOverlay.style.display="none";document.body.style.overflow=""}closeBtn.addEventListener("click",closeArticleOverlay);fullArticleOverlay.addEventListener("click",(event=>{if(event.target===fullArticleOverlay){closeArticleOverlay()}}));document.addEventListener("keydown",(event=>{if(event.key==="Escape"&&fullArticleOverlay.style.display==="block"){closeArticleOverlay()}}))}));